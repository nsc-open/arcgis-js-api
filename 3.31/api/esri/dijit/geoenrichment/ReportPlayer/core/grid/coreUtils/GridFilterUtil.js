// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See http://js.arcgis.com/3.31/esri/copyright.txt for details.
//>>built
define("esri/dijit/geoenrichment/ReportPlayer/core/grid/coreUtils/GridFilterUtil","dojo/string ../../supportClasses/tableJson/TableJsonResizeUtil ../../supportClasses/tableJson/TableJsonUtil ./sorting/GridSortUtil ./sorting/GridRowStyler ./GridDataUtil esri/dijit/geoenrichment/utils/ObjectUtil esri/dijit/geoenrichment/utils/JsonXmlConverter dojo/i18n!esri/nls/jsapi".split(" "),function(p,r,t,u,v,m,w,x,h){h=h.geoenrichment.dijit.ReportPlayer.Grid;var q={collectStatsForVariables:function(b){var d=0,
g=[],k={};if(2>b.columns.length||3>b.store.data.length)return null;var y=q._hasBigTitleCell(b)?1:0;b.columns.forEach(function(a,e){var l,c={alias:null,fieldName:a.field,columnIndex:e,min:Infinity,max:-Infinity,decimals:0,dataArray:[]};b._getOriginalData().forEach(function(f,e){f=m.getRenderedValue(b,f,a);"number"===typeof f.numericValue?(f=f.numericValue,c.min=Math.min(c.min,f),c.max=Math.max(c.max,f),c.decimals=Math.max(c.decimals,w.getPlaces(f)),c.dataArray.push(f),d++,l=!0,k[e]=!0):c.alias=c.alias||
e===y&&x.unrichHTML(f.formattedValue)});l&&(c.alias=c.alias||p.substitute(h.columnN,[e+1]),g.push(c),c._cIndex=e)});var e={};g.forEach(function(a){(e[a.alias]=e[a.alias]||[]).push(a)});for(var n in e)1<e[n].length&&e[n].forEach(function(a){a.alias+=" ("+p.substitute(h.columnN,[a._cIndex+1])+")"});g.forEach(function(a){delete a._cIndex});return 1<d&&{filterRanges:g,numVariablesTotal:d,numRowsTotal:Object.keys(k).length}},_hasBigTitleCell:function(b){var d=b.getFieldCells()[0];return m.getColumnSpan(d)===
b.columns.length&&!m.getRowSpan(d)},filterGridData:function(b,d){var g=[],k=0,h=0,e={};d.forEach(function(a){e[a.fieldName]=a});b._saveOriginalData();d=u.getSortableDataInfo(b);b.store.data.forEach(function(a){var d=!0,l;b.columns.forEach(function(c){var f=e[c.field];if(f){var g=m.getRenderedValue(b,a,c);"number"===typeof g.numericValue&&(l=!0,g.numericValue<f.min||g.numericValue>f.max?(delete a.fieldInfos[c.field],delete a[c.field],d=!1):k++)}});d&&(g.push(a),l&&h++)});r.resizeTableJsonToFitHeight({data:{data:g,
columns:b.columns}},t.getTableHeight({data:{data:b.store.data}}));if(d&&d.styleInfo){var n=g.slice(d.topData.length);v.setAlternatingColors(n,b.columns,d.styleInfo)}b.store.data=g;return{numValuesShown:k,numRowsShown:h}}};return q});